(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0efebe00"],{"8afc":function(e,t,a){},"9ad1":function(e,t,a){"use strict";a("8afc")},"9c2b":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-user-solid"}),e._v(" 系统用户 ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("添加用户")]),a("el-select",{staticClass:"handle-select mr10",attrs:{disabled:e.groupdisable,clearable:"",placeholder:"所属单位"},model:{value:e.query.groupid,callback:function(t){e.$set(e.query,"groupid",t)},expression:"query.groupid"}},e._l(e.groups,(function(e,t){return a("el-option",{key:t,attrs:{label:e.username,value:e.id}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"用户类型"},on:{change:e.onRoleChange},model:{value:e.query.role,callback:function(t){e.$set(e.query,"role",t)},expression:"query.role"}},[a("el-option",{key:"1",attrs:{label:"单位账号",value:"1"}}),a("el-option",{key:"2",attrs:{label:"采集人员",value:"2"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getData}},[e._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"id",label:"用户编号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{label:"用户类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.role?a("span",[e._v("超级管理员")]):e._e(),1===t.row.role?a("span",[e._v("单位账号")]):e._e(),2===t.row.role?a("span",[e._v("采集人员")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"lastlogintime",label:"最后登录时间"}}),a("el-table-column",{attrs:{prop:"group",label:"所属单位"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!==t.row.role?a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]):e._e(),0!==t.row.role?a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[20,30,50,100],"page-size":20,background:"",layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户编号"}},[a("el-input",{attrs:{readonly:"",placeholder:"无需填写"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{disabled:e.selectDisable1,placeholder:"用户类型"},on:{change:e.roleChange},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-option",{key:"2",attrs:{label:"单位账号",value:1}}),a("el-option",{key:"3",attrs:{label:"采集人员",value:2}})],1)],1),a("el-form-item",{attrs:{label:"所属单位"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{disabled:e.selectDisable2,placeholder:"所属单位"},model:{value:e.form.groupid,callback:function(t){e.$set(e.form,"groupid",t)},expression:"form.groupid"}},e._l(e.groups,(function(e,t){return a("el-option",{key:t,attrs:{label:e.username,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password",placeholder:e.dialogPassword},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},s=[],i=a("bc3a"),o=a.n(i),r={name:"ordertable",data:function(){return{selectDisable1:!1,selectDisable2:!1,editVisible:!1,form:[],dialogTitle:"编辑",dialogPassword:"若无需修改密码，请留空",query:{groupid:null,role:null},tableData:[],pageSize:20,currentPage:1,total:50,groups:null,groupdisable:!0,user:null}},created:function(){this.getData(),this.checkLogin(),this.getGroupData()},methods:{roleChange:function(){0===this.user.role&&(1===this.form.role?(this.selectDisable2=!0,this.form.groupid=null):this.selectDisable2=!1)},checkLogin:function(){var e=this;o.a.post("/checklogin").then((function(t){t.data.flag&&(e.user=t.data.data)})).catch((function(e){console.log(e)}))},saveEdit:function(){var e=this;this.axios.post("/admin/addOrUpdateSystemUser",this.qs.stringify({id:this.form.id,username:this.form.username,password:this.form.password,role:this.form.role,groupid:this.form.groupid})).then((function(t){e.getData(),e.getGroupData(),e.editVisible=!1,t.data.flag?e.$message.success(t.data.msg):e.$message.error(t.data.msg)})).catch((function(e){console.log(e)}))},addUser:function(){this.form=[],1===this.user.role?(this.selectDisable1=!0,this.selectDisable1=!0,this.form.groupid=this.user.id,this.form.role=2):(this.selectDisable1=!1,this.selectDisable2=!1),this.dialogPassword="请输入密码",this.dialogTitle="添加用户",this.editVisible=!0},cancel:function(){this.editVisible=!1,this.getData()},handleEdit:function(e){this.selectDisable1=!0,this.selectDisable2=!0,this.dialogPassword="若无需修改密码，请留空",this.dialogTitle="编辑用户",this.form=e,this.form.password="",this.editVisible=!0},handleDelete:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){t.axios.post("/admin/delSystemUser",t.qs.stringify({id:e.id})).then((function(e){t.getData(),t.getGroupData(),e.data.flag?t.$message.success(e.data.msg):t.$message.error(e.data.msg)})).catch((function(e){console.log(e)}))})).catch((function(){}))},onRoleChange:function(){2==this.query.role?this.groupdisable=!1:(this.groupdisable=!0,this.query.groupid=null)},getGroupData:function(){var e=this;this.axios.post("/admin/getGroup").then((function(t){t.data.flag&&(e.groups=t.data.data)})).catch((function(e){console.log(e)}))},getData:function(){var e=this;this.axios.post("/admin/getAllSystemUser",this.qs.stringify({pageNum:this.currentPage,pageSize:this.pageSize,groupid:this.query.groupid,role:this.query.role})).then((function(t){t.data.flag?(e.tableData=t.data.data.list,e.total=t.data.data.total):e.tableData=t.data.data})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()}}},n=r,c=(a("9ad1"),a("2877")),u=Object(c["a"])(n,l,s,!1,null,"6aa55366",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-0efebe00.8c48f3ef.js.map