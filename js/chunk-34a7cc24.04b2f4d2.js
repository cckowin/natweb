(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34a7cc24"],{"107f":function(t,e,a){},"39ef":function(t,e,a){"use strict";a("107f")},ccf2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-s-data"}),t._v(" 试管管理 ")])],1)],1),a("div",{staticClass:"container",staticStyle:{"margin-bottom":"10px"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"试管状态"},model:{value:t.result.status,callback:function(e){t.$set(t.result,"status",e)},expression:"result.status"}},[a("el-option",{key:"1",attrs:{label:"阴性",value:"1"}}),a("el-option",{key:"2",attrs:{label:"阳性",value:"2"}})],1),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"试管条码"},model:{value:t.result.tubeid,callback:function(e){t.$set(t.result,"tubeid",e)},expression:"result.tubeid"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:t.setTube}},[t._v("发布结果")]),a("el-divider",{attrs:{"content-position":"left"}},[t._v("批量发布")]),a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"选择任务"},model:{value:t.jobid,callback:function(e){t.jobid=e},expression:"jobid"}},t._l(t.jobs2,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-position"},on:{click:t.setJobTube}},[t._v("批量发布")]),a("span",[t._v("(将该任务下的所有未发布结果的试管设置为阴性,仅可选择状态为'已完成'的采集任务)")])],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"采集单位"},on:{change:t.onGroupChange},model:{value:t.query.groupid,callback:function(e){t.$set(t.query,"groupid",e)},expression:"query.groupid"}},t._l(t.groups,(function(t,e){return a("el-option",{key:e,attrs:{label:t.username,value:t.id}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"采集任务"},model:{value:t.query.jobid,callback:function(e){t.$set(t.query,"jobid",e)},expression:"query.jobid"}},t._l(t.jobs,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1),[a("el-date-picker",{staticClass:"mr10",attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"采集时间","end-placeholder":"采集时间",align:"right"},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}})],a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"试管状态"},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[a("el-option",{key:"0",attrs:{label:"已采集",value:"0"}}),a("el-option",{key:"1",attrs:{label:"阴性",value:"1"}}),a("el-option",{key:"2",attrs:{label:"阳性",value:"2"}})],1),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"试管条码"},model:{value:t.query.tubeid,callback:function(e){t.$set(t.query,"tubeid",e)},expression:"query.tubeid"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v("搜索")])],2),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"group",label:"采集单位",align:"center"}}),a("el-table-column",{attrs:{prop:"operator",label:"采集人",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"jobname",label:"采集任务",align:"center"}}),a("el-table-column",{attrs:{prop:"tubeId",label:"试管条码",align:"center"}}),a("el-table-column",{attrs:{prop:"starttime",label:"采集时间",align:"center"}}),a("el-table-column",{attrs:{prop:"endtime",label:"检测时间",align:"center"}}),a("el-table-column",{attrs:{label:"试管状态",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("el-tag",{attrs:{size:"medium"}},[t._v("已采集")]):1===e.row.status?a("el-tag",{attrs:{size:"medium",type:"success"}},[t._v("阴性")]):2===e.row.status?a("el-tag",{attrs:{size:"medium",type:"danger"}},[t._v("阳性")]):t._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,30,50,100],"page-size":20,background:"",layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},i=[],l={name:"tubeManage",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},result:{status:null,tubeid:null},query:{groupid:null,jobid:null,operatorid:null,status:null,idcardnum:null,tubeid:null},tableData:[],pageSize:20,currentPage:1,total:50,times:[],groups:null,jobs:null,jobs2:null,jobid:null}},created:function(){this.getData(),this.getGroupData(),this.getJobData(),this.getJobData2()},methods:{setJobTube:function(){var t=this;null!==this.jobid&&""!==this.jobid?this.axios.post("/admin/setJobTubeStatus",this.qs.stringify({jobid:this.jobid})).then((function(e){e.data.flag?(t.$message.success(e.data.msg),t.getData()):t.$message.error(e.data.msg)})).catch((function(t){console.log(t)})):this.$message.error("请选择任务")},setTube:function(){var t=this;null!==this.result.status&&""!==this.result.status?null!==this.result.tubeid&&""!==this.result.tubeid?this.axios.post("/admin/setTubeStatus",this.qs.stringify({tubeid:this.result.tubeid,status:this.result.status})).then((function(e){e.data.flag?(t.$message.success(e.data.msg),t.getData()):t.$message.error(e.data.msg)})).catch((function(t){console.log(t)})):this.$message.error("请输入试管条码"):this.$message.error("请选择试管状态")},getJobData:function(){var t=this;this.axios.post("/admin/getJob",this.qs.stringify({groupid:this.query.groupid})).then((function(e){e.data.flag&&(t.jobs=e.data.data)})).catch((function(t){console.log(t)}))},getJobData2:function(){var t=this;this.axios.post("/admin/getJob",this.qs.stringify({groupid:this.query.groupid,status:1})).then((function(e){e.data.flag&&(t.jobs2=e.data.data)})).catch((function(t){console.log(t)}))},onGroupChange:function(){this.query.jobid=null,""===this.query.groupid&&(this.query.groupid=null),console.log(this.query.groupid),this.getJobData()},getGroupData:function(){var t=this;this.axios.post("/admin/getGroup").then((function(e){e.data.flag&&(t.groups=e.data.data)})).catch((function(t){console.log(t)}))},getData:function(){var t=this;this.axios.post("/admin/getTube",this.qs.stringify({groupid:this.query.groupid,jobid:this.query.jobid,operatorid:this.query.operatorid,status:this.query.status,tubeid:this.query.tubeid,time1:this.times[0],time2:this.times[1],pageNum:this.currentPage,pageSize:this.pageSize})).then((function(e){e.data.flag?(t.tableData=e.data.data.list,t.total=e.data.data.total):t.tableData=e.data.data})).catch((function(t){console.log(t)}))},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()}}},n=l,o=(a("39ef"),a("2877")),r=Object(o["a"])(n,s,i,!1,null,"5549444f",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-34a7cc24.04b2f4d2.js.map